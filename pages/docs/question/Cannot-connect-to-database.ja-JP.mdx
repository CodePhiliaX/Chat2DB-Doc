# データベースに接続できません

> Chat2DB をまったく初めて使用する場合は、[Chat2DB](https://docs.chat2db.ai/ja-JP/docs/start-guide/getting-started) を使用する最初の手順の概要を説明する入門ガイドをお読みください。

## ステップ 1. ネットワーク設定を確認する

データベースはオンプレミスでもクラウドでも動作します。サーバーとクラウド データベースの場合は、ネットワーク接続が必要です。接続が利用可能であることを確認するには、ping および telnet コマンドを使用します。

### 1. ping コマンドを使用します。

「ping」コマンドは、別のコンピュータへのネットワーク接続をテストするために使用されます。小さなパケットをターゲット ホストに送信し、応答を待ちます。応答が受信された場合、ネットワーク接続は正常です。

#### Windows:

```cmd
ping [options] target name
```

- 「ping」の後には、テストするホスト名または IP アドレスが続きます。
- いくつかのオプションを追加できます。たとえば、`-t`は「Ctrl+C」を押すまで継続的に ping パケットを送信することを意味します。`-n`に続けて数字を入力すると、送信する回数を示します。数字はデータを示します。`-a`は、アドレスをホスト名に解決するためのコマンド オプションです (可能な場合)。

#### Linux / macOS:

```bash
ping [options] target name
```

- 使い方はWindowsと同様です。

### 例：

```bash
ping 192.168.1.1
```

!["ping"](/image/questions/ping.png)


### 2. Telnetコマンドを使用する

「telnet」コマンドは、ポートが開いているかどうかをテストするために使用されます。これを使用して、特定のサービス (データベース サービスなど) が特定のポートでリッスンしているかどうかを確認できます。

#### Windows:

```cmd
telnet [host] [port]
```

- 「telnet」の後には、テストするホスト名または IP アドレス、スペース、ポート番号が続きます。

#### Linux / macOS:

```bash
telnet [host] [port]
```

- 使い方はWindowsと同様です。

### 例: この例では、IP アドレス `192.168.1.1` のホスト上の MySQL データベース サービスに接続しようとします。デフォルトのポートは `3306` です。

```bash
telnet 192.168.1.1 3306
```

> セキュリティ上の理由から、DBMS は通常、すべての Telnet 接続をドロップします。 telnet コマンドを使用すると、ポートが通信用に開いているかどうかを確認できます。

### 注:
- Windows 10 で「telnet」を使用している場合は、最初に Telnet クライアント機能を有効にする必要がある場合があります。これは、PowerShell で `Get-WindowsCapability -Online | Where-Object {$_.Name -like "Telnet*"} | Add-WindowsCapability`。
- 「telnet」コマンドがサービスに正常に接続すると、通常はウェルカム メッセージまたはプロンプトが表示されます。接続できない場合は、エラー メッセージが表示されるか、応答がない場合があります。
- 最近のシステムの多くは、安全性が低いため、デフォルトでは「telnet」をインストールしません。代わりに「nc」(netcat) または他のセキュリティ ツールを使用できます。

## ステップ 2. 接続プロパティを確認する

各データベース (MySQL、PostgreSQL、Oracle、またはその他のプロバイダー) には独自の接続設定があります。ほとんどのデータベースには、次の接続設定が含まれています。

- **ホスト**: データベースが保存されているコンピューターまたはその他のデバイスのホスト名。 IP アドレス **127.0.0.1** またはドメイン名 **localhost** を指定できます。
- **データベース**: 接続するデータベースの名前。データベース名は、データベース サーバーの設定で確認するか、データベース管理者に問い合わせることで確認できます。場合によっては、データベース コマンド ラインでクエリを実行して、使用可能なすべてのデータベースの名前を確認できます。たとえば、MySQL では `SHOW DATABASES;` を実行できます。

!["データベースを表示"](/image/questions/show.png)

- **ユーザー**: データベースで操作を実行するための十分な権限を持つユーザー名。データベース コマンド ラインでクエリを実行すると、使用可能なすべてのデータベースの名前が表示されます。たとえば、MySQL では `SHOW GRANTS;` を実行できます。
- **パスワード**: ユーザーのパスワード。
- **ポート**: ホスト間の接続ポイントを識別する番号。ホストはポート番号を使用して、どのアプリケーション、サービス、またはプロセスと接続を確立する必要があるかを判断します。データベース ベンダーが異なれば、データベースに異なるポートを使用します。次のリストは、デフォルトのポート番号のリストの一部です。

| Database | Default Port |
|:------------:|:--------:|
| MySQL | 3306 |
| PostgreSQL | 5432 |
| Oracle | 1521 |
| SQL Server | 1433 |
| MongoDB | 27017 |
| Redis | 6379 |
| KingBase | 54321 |
| MariaDB | 3306 |
| SQLite | none |
| ClickHouse | 9000 |
| DM | 5236 |
| OceanBase | 2883 |

> 実際のポート番号はシステムによって異なる場合があります。データベース管理者、サーバー設定、またはホスティングプロバイダーに正しいポート番号を使用していることを確認してください。

## ステップ 3. ドライバーのバージョンを確認する

JDBC ドライバーを使用すると、Chat2DB でデータベース管理システム (DBMS) と対話できるようになります。各 DBMS には独自の JDBC ドライバーが必要です。ドライバーのバージョンと DBMS のバージョンに互換性があることを確認してください。

サポートされているすべてのベンダーのドライバーを Chat2DB からダウンロードできます。ドライバー リストでサポートされているベンダーのリストを表示できます。
あるいは、独自のドライバーを Chat2DB にアップロードすることもできます。

## ステップ 4. SSH 接続が必要かどうかを確認する

データベースへの接続をより安全にするために、一部のサービスでは SSH の使用が必要です。

**Secure Shell** または **SSH** は、クライアントとサーバー間の接続を暗号化するために使用されるネットワーク プロトコルです。

Chat2DB では、「Chat2DB SSH」トンネルを使用して SSH トンネルを作成できます。 Chat2DB は、設定した SSH 構成を使用して SSH トンネルを作成します。

!["ssh"](/image/connection/ssh.png)

- `USE SSH`: SSH チャネルを使用するかどうか
- `SSH Host`: SSH サーバーのアドレス
- `SSH Port`: SSH サーバー ポートのデフォルトは 22
- `Authentication`: SSH 認証方法、ユーザー名、パスワード、または秘密キー
- `User`: SSH ユーザー名
- `Password`: SSH パスワード
- `Test the SSH connection`: SSH 接続が正常かどうかをテストします。

## ステップ 5. サポートが必要な場合は、メールでお問い合わせください。

Chat2DB チームに連絡し、問題を説明し、トラブルシューティングを迅速化できるすべての利用可能な資料 (コード サンプル、スクリーンショット、ログ、アニメーション、ビデオ、その他の資料) を添付してください。できるだけ早くご連絡させていただきます。

- 電子メール: [Chat2DB@ch2db.com](Chat2DB@ch2db.com)
- GitHub: [https://github.com/codePhiliaX/Chat2DB/issues](https://github.com/codePhiliaX/Chat2DB/issues)