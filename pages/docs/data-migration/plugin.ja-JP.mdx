# データ移行プラグインについて

Chat2DB は、同じサーバー上でも別のサーバー上でも、あるデータベースまたはスキーマから別のデータベースまたはスキーマへのデータベース オブジェクト (テーブル、ビューなど) の転送をサポートします。この機能により、データの移行、同期、バックアップとリカバリなどの操作に柔軟性と利便性が提供されます。
「DBMotion」プラグインは、Chat2DB プラグイン ライブラリのプラグインであり、データの移行、同期、検証などの機能を提供し、あるデータベース/スキーマから別のデータベース/スキーマへのオブジェクトの転送をサポートします。スキーマ、ターゲット データベースおよび/またはスキーマ。これは、ソースと同じサーバー上に存在することも、別のサーバー上に存在することもできます。 。

## DBモーション

### 基本的な紹介

データ転送サービス DBMotion は、軽量で環境に優しいデータベース **移行**、**同期**、**検証ツール**です。ローカライズされたデータ移行、災害復旧訓練、2 か所の 3 つのセンター、および異なる場所での複数のアクティビティをサポートします。ソース データベースを意識せず、シンプルで統合が容易で、スムーズなパフォーマンスを実現します。複数のクラウド間の移行を支援し、災害復旧を自由に提供します。

### 特徴

#### サポートされているデータベース

「v1.0.0 DBMotion プラグイン」は、「MySQL から MySQL」オブジェクトの移行、完全なデータ移行、および増分同期をサポートしています。現在、同じバージョンの移行または 5.6、5.7、および 8.0 の上位バージョンへの移行をサポートしています。

---

#### サポートされるデータベース

**以下はサポートされており、「DBMotion プラグイン」に統合されるデータベース タイプです**

**「PostgreSQL から PostgreSQL」** オブジェクトの移行、完全なデータ移行、増分同期 (DDL と双方向同期はまだサポートされていません)。 現在、同じバージョンまたは上位バージョンへの移行は、バージョン 9.6 以降でサポートされています。

**「MySQL から Clickhouse」** オブジェクトの移行、完全なデータ移行、増分同期。MySQL 5.6、5.7、8.0 から Clickhouse 22 以降のバージョンをサポートします。

**「MongoDB から MongoDB」** オブジェクトの移行、完全なデータ移行、および増分同期。現在、同じバージョンの移行または MongoDB 3.6 以降の上位バージョンへの移行がサポートされています。

**「openGauss から openGauss」** オブジェクトの移行、完全なデータの移行、増分同期。バージョン 5.0.0 以降の一方向および双方向の同期をサポートします。

**「GaussDB から GaussDB」** オブジェクトの移行、完全なデータ移行、および増分同期。バージョン 503.1 以降では、同じバージョンの移行または上位バージョンへの移行がサポートされます。

**「Oracle から GaussDB」** の完全なデータ移行と増分同期。

**「SQL Server から SQL Server」** オブジェクトの移行と完全なデータの移行は、現在 2017/2019 の同じバージョンの相互移行をサポートしています。

**「Redis から Redis」** の完全なデータ移行と増分同期は、現在、同じバージョンの移行または 5.0 以降の上位バージョンへの移行をサポートしています。

**「MySQL から Kafka」** への完全なデータ移行。

**「PostgreSQL/GaussDB/openGauss から Kafka」** 完全なデータ移行、増分サブスクリプション。

---

### アプリケーションシナリオ

#### 1. コンピューター室およびクラウド上およびクラウド外でのデータベースの移行

DBMotion は、Docker のオフライン バージョンとクラウド バージョンをサポートしており、ユーザーはオフライン バージョンをダウンロードして、自分のコンピュータ ルームでデータベースの移行操作を実行できます。 クラウド上の SAAS バージョンを直接使用して、オンクラウドまたはクロスクラウドへの移行を実行することもできます。また、オンクラウドからオフクラウドへの移行、およびオフクラウドからオンクラウドへの移行もサポートされます。 ECS またはオフラインのコンピュータ ルームに転送します。


#### 2. 国内データベースの移行
視覚的で透過的な移行ツールを使用して、海外データベースを国内データベースに移行し、海外クラウドを国内クラウドに移行します。 テーブル、インデックス、その他の構造、およびストアド プロシージャ、カスタム関数、その他のコードの変換をサポートし、組み込まれた専門家の経験とベスト プラクティスを通じて、効率的で透過的かつ安全なビジネスの完全かつ増分データの同期を保証し、ゼロゼロのデータ同期を実現します。ダウンタイム移行のサポート オブジェクトとデータの検証によりデータの一貫性が保証され、いつでもロールバックできます。

#### 3. リモート マルチアクティブ データ同期
MySQL と openGauss 間の双方向同期をサポートし、循環レプリケーションを効果的に回避し、上書き、無視、エラー報告という 3 つの競合解決戦略をサポートします。 2拠点3拠点・多拠点マルチアクティブのアーキテクチャに対応し、災害復旧訓練もサポートします。


---

### 利点と特徴

- ゼロ ダウンタイム: 移行プロセス全体でビジネス ダウンタイムは必要なく、ソース データベースにロックはかかりません。ソース ライブラリは、移行プロセス中にさまざまな DDL 操作を実行できます。

- 便利で直感的: 視覚的な操作により、マウスをクリックするだけでデータの移行と検証が完了します

- 同時実行性と高いパフォーマンス: オブジェクト、フル、インクリメンタル、および検証プロセスはすべてマルチスレッド同時実行性を使用し、同期パフォーマンスは 40M/s に達します。

- 安全かつ効率的: SSL 接続をサポートし、送信データのセキュリティを確保します。

- 安定性と信頼性: 送信の再開、ソースが切断された場合の自動再接続、ターゲットが失敗した場合の自動再試行をサポートします。

- 事前チェック: 正式な移行の前に事前チェックを行い、移行プロセス中に発生する可能性のある問題を発見します。

- データ検証: データ切り替えを保護するため、移行後のデータ検証をサポートします。

- 双方向同期: 循環レプリケーションを積極的に回避し、競合ポリシーの処理をサポートします。

- オブジェクト マッピング/Where 条件フィルタリング: ソース ライブラリとターゲット ライブラリ間のオブジェクト名のマッピングをサポートし、同期中の一部の機密データの無視をサポートします。



---

### 料金表

「DBMotion プラグイン」は、期間限定で「Chat2DB Pro」メンバーに無料で提供されます。

---

### 使用制限

#### 1. 帯域幅の制限

ソース データベースから DBMotion まで、および DBMotion からターゲット データベースまでのネットワーク帯域幅によって、移行の速度が制限されます。どちらかの側のネットワーク帯域幅が不十分な場合、移行パフォーマンスが低下し、移行速度が指定された移行速度に達しなくなります。

#### 2. データベースのパフォーマンスの制限

ソース ライブラリまたはターゲット ライブラリのパフォーマンスにより、DBMotion 移行のパフォーマンスが低下します。ソース ライブラリのパフォーマンスが低いと、DBMotion によるデータのフェッチが遅くなり、ターゲット ライブラリのパフォーマンスが低いと、DBMotion でのデータの保存が遅くなります。

#### 3. MySQL バイナリログ形式の問題

DBMotion がデータ変更を正しく解析できるように、binlog は ROW 形式を使用する必要があります。これにより、ターゲット DDL 変更に対して増分同期が行われるときに、alter を使用する代わりに db1; alter table tb1 を使用するのと同様の方法を使用することをお勧めします。 table db2.tb1. は、DBMotion がデータベースを誤って判断し、この変更をフィルタリングする必要があるかどうかを判断する際にエラーが発生するのを防ぎます。

#### 4. ソース データベース オブジェクトの選択では、1 つのノードをすべて選択するか、現在の子ノードをすべて選択するかを区別できません。

インターフェイス上のスキーマの下にあるすべてのテーブルを選択する場合、インターフェイスに表示されているすべてのテーブルが選択されているのか、それともスキーマ全体が選択されているのかを区別することはできません。現在、同期はスキーマ全体をチェックすることによって実行されます。つまり、このスキーマの下にあるすべての現在のテーブルと、後で作成されるテーブルがターゲットに同期されます。

#### 5. オブジェクトの依存関係の層が多すぎると、やはりエラーが発生します。

DBMotion は現在、10 レイヤー内のオブジェクトの依存関係を処理します。つまり、ビュー v10 は v9 に依存し、v9 は v8 に依存し、... v2 は v1 に依存し、DBMotion は自動的にそれを処理しますが、依存関係が 10 レイヤーを超える場合、エラーが報告される可能性があります。

#### 6. オブジェクトの移行から完全移行までの間に作成されたテーブルは同期できません。
ユーザーはスキーマ全体 (db1) を移行することを選択しましたが、オブジェクトの移行と完全な移行の間にテーブル db1.tb1 が作成されました。オブジェクトの移行時には db1.tb1 が存在しないため、オブジェクトの移行では db1.tb1 のテーブル構造は移行されません。そのため、完全な移行中に、テーブル構造が存在しないというエラーが報告されます。

#### 7. その他
```
操作のための違法な照合（UTF8MB4_GENERAL_CI、暗黙的）および（UTF8MB4_0900_AI_CI、暗黙的） '=' MySQL 8.0は、UTF8MB4_CIの照合ルールとしてのUTF8MB4_0900_AI_CIを使用します。ビューがある場合、convert( tt.ID using utf8mb4 ) を使用すると、オブジェクトをターゲットに移行するときにエラーが発生する可能性があります。 不正な照合順序が混在しているため、convert(tt.ID using utf8mb4 ) COLLATE utf8mb4_general_ci にビューを手動で変更することをお勧めします。この問題を回避するには、ターゲット ライブラリを使用します。
```
